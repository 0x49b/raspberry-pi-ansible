---
- name: Prep Pi
  hosts: all
  become: true
  become_user: root
  tasks:
    #   Currently seeing a GitHub rate limit error when running this
    # - name: Update pi software
    #   ansible.builtin.shell: rpi-update
    
    - name: Update apt repo and cache
      apt: update_cache=yes force_apt_get=yes cache_valid_time=3600

    - name: Upgrade all packages
      apt: upgrade=dist force_apt_get=yes

    - name: Reboot the machine
      reboot:
    